version: '3'

services:
  pgedge-n1:
    hostname: n1
    build:
      context: "."
      dockerfile: Dockerfile.el9
    environment:
      - HOSTNAME=n1
      - PEER_HOSTNAME=n2
    ports:
      - '15432:5432'
    volumes:
      - 'n1:/data'

  pgedge-n2:
    hostname: n2
    build:
      context: "."
      dockerfile: Dockerfile.el9
    environment:
      - HOSTNAME=n2
      - PEER_HOSTNAME=n1
    ports:
      - '15433:5432'
    volumes:
      - 'n2:/data'

volumes:
  n1:
    driver: overlay2
  n2:
    driver: overlay2
